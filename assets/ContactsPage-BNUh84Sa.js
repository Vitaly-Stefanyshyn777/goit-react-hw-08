import{j as t,a as v,r as f}from"./react-JG7DZguw.js";import{a as p,u as r}from"./react-redux-C1ORDFMe.js";import{D as S}from"./DocumentTitle-DGBMJYsn.js";import{c as q}from"./reselect-NCCDNIWx.js";import{a as M,b as T,c as k,d as R,f as h,s as w}from"./index-CIJ_XjTI.js";import{F as D,a as $,b as g,E as N}from"./formik-CfGcpTwB.js";import{c as A,a as C}from"./yup-C3UbQlk0.js";import{_ as d}from"./react-hot-toast-DsJE6WWk.js";import{F as W,a as O,b as P,c as U}from"./react-icons-C6Z5BmmQ.js";import{R as z}from"./react-modal-FTYKBgkq.js";import"./exenv-BTN8Bl8p.js";import"./use-sync-external-store-7_HN8JUD.js";import"./react-helmet-async-Cy8LYCv1.js";import"./invariant--TR4x_JN.js";import"./shallowequal-DxoHqyI3.js";import"./prop-types-IU01hjff.js";import"./react-dom-rRzr_mU3.js";import"./scheduler-CzFDRTuY.js";import"./react-router-dom-D6Rafzb1.js";import"./react-router-Bx1AX-mG.js";import"./@remix-run-BZffl5ES.js";import"./redux-persist-Cr_cIafU.js";import"./redux-DITMfSWq.js";import"./@reduxjs-DF9IRoxF.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./axios-upsvKRUO.js";/* empty css                         */import"./@mui-Djcfd9KG.js";import"./clsx-B-dksMZM.js";import"./@emotion-KyolEqcV.js";import"./hoist-non-react-statics-BE0XjIkh.js";import"./@babel-CF3RwP-h.js";import"./stylis-YPZU7XtI.js";import"./goober-np-fLvOt.js";import"./deepmerge-DhIoniG1.js";import"./lodash-es-dVqQl90_.js";import"./react-fast-compare-DQYrHu-Y.js";import"./property-expr-DEi1ZLzV.js";import"./tiny-case-BJ7jYKNY.js";import"./toposort-DEsGJkNe.js";import"./warning-BwjNEfsz.js";import"./react-lifecycles-compat-DsJokh4A.js";const _=e=>e.contacts||{},j=e=>_(e).items??[],y=e=>_(e).error??null,E=e=>_(e).isLoading??!1,H=e=>e.filters||{},V=e=>{var o;return((o=H(e).name)==null?void 0:o.trim().toLowerCase())||""},L=q([j,V],(e,o)=>o?e.filter(({name:c="",phone:s=""})=>c.toLowerCase().includes(o)||s.includes(o)):e),Y="_contactForm_vlfb2_1",G="_formInput_vlfb2_31",J="_inputErr_vlfb2_50",K="_formBtn_vlfb2_56",l={contactForm:Y,formInput:G,inputErr:J,formBtn:K},Q=()=>{const e=p(),o=r(j),c=A({name:C().min(3,"Minimum 3 characters").max(50,"Maximum 50 characters").required("Must be filled"),number:C().matches(/^\+?[1-9]\d{1,14}$/,"Invalid phone number").min(3,"Minimum 3 digits").max(50,"Maximum 50 digits").required("Must be filled")}),s={name:"",number:""},n=(i,{resetForm:m})=>{if(o.some(b=>b.name.toLowerCase()===i.name.toLowerCase()||b.number===i.number)){d.error("This contact already exists!",{duration:4e3,style:{border:"1px solid #ff4d4d",padding:"16px",color:"#ff4d4d"}});return}e(M(i)),d.success("Contact added successfully!"),m()};return t.jsx("div",{children:t.jsx(D,{initialValues:s,onSubmit:n,validationSchema:c,children:t.jsxs($,{className:l.contactForm,children:[t.jsxs("label",{children:["Name",t.jsx(g,{className:l.formInput,name:"name",type:"text"}),t.jsx(N,{className:l.inputErr,name:"name",component:"p"})]}),t.jsxs("label",{children:["Number",t.jsx(g,{className:l.formInput,name:"number",type:"text"}),t.jsx(N,{className:l.inputErr,name:"number",component:"p"})]}),t.jsx("button",{className:l.formBtn,type:"submit",children:"Add contact"})]})})})},X="_searchWrap_dm6pn_1",Z="_searchInput_dm6pn_21",F={searchWrap:X,searchInput:Z},tt=()=>{const e=p(),o=r(T)||"",c=s=>{e(k(s.target.value))};return t.jsx("div",{className:F.searchWrap,children:t.jsxs("label",{children:["Find contact by name",t.jsx("input",{className:F.searchInput,type:"text",value:o,onChange:c})]})})},et="_contactList_1mf9a_1",I={contactList:et},ot="_contactItem_1hq6x_1",st="_contactInfo_1hq6x_22",nt="_contactName_1hq6x_31",ct="_contactNumber_1hq6x_32",at="_icon_1hq6x_40",rt="_delButton_1hq6x_45",it="_wrapper_1hq6x_68",lt="_content_1hq6x_81",mt="_closeBtn_1hq6x_91",a={contactItem:ot,contactInfo:st,contactName:nt,contactNumber:ct,icon:at,delButton:rt,wrapper:it,content:lt,closeBtn:mt},B=v.memo(({id:e,name:o,number:c})=>{const[s,n]=f.useState(!1),i=p(),m=()=>{i(R(e)),n(!1),d.success(`Contact "${o}" deleted successfully!`,{position:"top-right",duration:3e3,style:{background:"#1f2937",color:"#fff",borderRadius:"8px",padding:"8px 16px"}})},u=()=>{d.info("Edit functionality coming soon!",{position:"top-right",duration:3e3,style:{background:"#2563eb",color:"#fff",borderRadius:"8px",padding:"8px 16px"}})};return t.jsxs("li",{className:a.contactItem,children:[t.jsxs("div",{className:a.contactInfo,children:[t.jsxs("p",{className:a.contactName,children:[t.jsx(W,{className:a.icon})," ",o]}),t.jsxs("p",{className:a.contactNumber,children:[t.jsx(O,{className:a.icon})," ",c]})]}),t.jsx("button",{className:a.editButton,onClick:u,children:t.jsx(P,{})}),t.jsx("button",{className:a.delButton,onClick:()=>n(!0),children:t.jsx(U,{})}),t.jsxs(z,{isOpen:s,onRequestClose:()=>n(!1),ariaHideApp:!1,className:a.modal,overlayClassName:a.overlay,contentLabel:"Delete Confirmation Modal",children:[t.jsx("p",{children:"Are you sure you want to delete this contact?"}),t.jsx("button",{className:a.confirmButton,onClick:m,children:"Yes"}),t.jsx("button",{className:a.cancelButton,onClick:()=>{n(!1),d.error("Delete action cancelled",{position:"top-right",duration:3e3,style:{background:"#dc2626",color:"#fff",borderRadius:"8px",padding:"8px 16px"}})},children:"No"})]})]})},(e,o)=>e.id===o.id&&e.name===o.name&&e.number===o.number);B.displayName="Contact";const dt=()=>{const e=p(),o=r(j),c=r(L),s=r(E),n=r(y);return console.log("All Contacts:",o),console.log("Filtered Contacts:",c),console.log("Loading State:",s),console.log("Error State:",n),f.useEffect(()=>{(!o||o.length===0)&&e(h())},[e,o]),s?t.jsx("div",{className:I.loader,children:t.jsx("p",{children:"Loading contacts..."})}):n?t.jsxs("div",{style:{color:"red"},children:[t.jsx("p",{children:n}),t.jsx("button",{onClick:()=>e(h()),children:"Retry"})]}):c.length===0&&!s&&!n?t.jsx("p",{children:"No contacts found"}):t.jsx("div",{children:t.jsx("ul",{className:I.contactList,children:c.map(({id:i,name:m,number:u})=>t.jsx(B,{id:i,name:m,number:u},i))})})},pt="_contactsPage_1j1ft_1",ut="_loadingText_1j1ft_10",xt="_errorText_1j1ft_16",x={contactsPage:pt,loadingText:ut,errorText:xt},ne=()=>{const e=p(),o=r(w),c=r(E),s=r(y),n=r(L);return f.useEffect(()=>{o&&(console.log("Fetching contacts..."),e(h()))},[o,e]),t.jsxs("div",{className:x.contactsPage,children:[t.jsx(S,{children:"Phonebook"}),t.jsx(Q,{}),t.jsx(tt,{}),c&&t.jsx("p",{className:x.loadingText,children:"Request in progress..."}),s&&t.jsxs("p",{className:x.errorText,children:["Error: ",s]}),!c&&!s&&n.length>0&&t.jsx(dt,{contacts:n})]})};export{ne as default};
